<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Project setup | zzr</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.992cb7aa.css" as="style"><link rel="preload" href="/assets/js/app.4aad3826.js" as="script"><link rel="preload" href="/assets/js/2.06be43ef.js" as="script"><link rel="preload" href="/assets/js/47.0c50e03c.js" as="script"><link rel="prefetch" href="/assets/js/10.e5107a41.js"><link rel="prefetch" href="/assets/js/11.604c2d4a.js"><link rel="prefetch" href="/assets/js/12.5a64ef9d.js"><link rel="prefetch" href="/assets/js/13.1bb9432f.js"><link rel="prefetch" href="/assets/js/14.f5c22324.js"><link rel="prefetch" href="/assets/js/15.e20e2825.js"><link rel="prefetch" href="/assets/js/16.13bee770.js"><link rel="prefetch" href="/assets/js/17.3a4ae192.js"><link rel="prefetch" href="/assets/js/18.cc5d35d1.js"><link rel="prefetch" href="/assets/js/19.4dec0e9c.js"><link rel="prefetch" href="/assets/js/20.497e2c48.js"><link rel="prefetch" href="/assets/js/21.9a320905.js"><link rel="prefetch" href="/assets/js/22.dfd8bd24.js"><link rel="prefetch" href="/assets/js/23.08cd3607.js"><link rel="prefetch" href="/assets/js/24.e0a529a2.js"><link rel="prefetch" href="/assets/js/25.6c526984.js"><link rel="prefetch" href="/assets/js/26.69384b5f.js"><link rel="prefetch" href="/assets/js/27.73bb2c9b.js"><link rel="prefetch" href="/assets/js/28.059d0a3f.js"><link rel="prefetch" href="/assets/js/29.06def4be.js"><link rel="prefetch" href="/assets/js/3.c9dfd424.js"><link rel="prefetch" href="/assets/js/30.4b00a1d4.js"><link rel="prefetch" href="/assets/js/31.d38571b0.js"><link rel="prefetch" href="/assets/js/32.b7030a24.js"><link rel="prefetch" href="/assets/js/33.395f14ce.js"><link rel="prefetch" href="/assets/js/34.13f1a8a0.js"><link rel="prefetch" href="/assets/js/35.f10f1ea4.js"><link rel="prefetch" href="/assets/js/36.0977c8d0.js"><link rel="prefetch" href="/assets/js/37.daa4f77d.js"><link rel="prefetch" href="/assets/js/38.cf28e309.js"><link rel="prefetch" href="/assets/js/39.491c7a93.js"><link rel="prefetch" href="/assets/js/4.d56c28ed.js"><link rel="prefetch" href="/assets/js/40.91578190.js"><link rel="prefetch" href="/assets/js/41.ecccc2d5.js"><link rel="prefetch" href="/assets/js/42.c26ee179.js"><link rel="prefetch" href="/assets/js/43.f54202c1.js"><link rel="prefetch" href="/assets/js/44.3a09c659.js"><link rel="prefetch" href="/assets/js/45.4aa5d9b1.js"><link rel="prefetch" href="/assets/js/46.62ff0d70.js"><link rel="prefetch" href="/assets/js/48.4da916ff.js"><link rel="prefetch" href="/assets/js/5.6a1ea478.js"><link rel="prefetch" href="/assets/js/6.52d7f34d.js"><link rel="prefetch" href="/assets/js/7.103f5d3f.js"><link rel="prefetch" href="/assets/js/8.f25ac9c8.js"><link rel="prefetch" href="/assets/js/9.94bb256c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.992cb7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">zzr</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/js/" class="nav-link">
  js
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link router-link-active">
  webpack
</a></div><div class="nav-item"><a href="/nuxt/" class="nav-link">
  nuxt
</a></div><div class="nav-item"><a href="/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/codereview/" class="nav-link">
  编码规范
</a></div><div class="nav-item"><a href="/question/" class="nav-link">
  问题收录
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/js/" class="nav-link">
  js
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link router-link-active">
  webpack
</a></div><div class="nav-item"><a href="/nuxt/" class="nav-link">
  nuxt
</a></div><div class="nav-item"><a href="/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/codereview/" class="nav-link">
  编码规范
</a></div><div class="nav-item"><a href="/question/" class="nav-link">
  问题收录
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/webpack/" aria-current="page" class="sidebar-link">webpack</a></li><li><a href="/webpack/webpackdoc.html" class="sidebar-link">webpack创建工程</a></li><li><a href="/webpack/vue-cli3.html" aria-current="page" class="active sidebar-link">vue-cli3 相关配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#project-setup" class="sidebar-link">Project setup</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#compiles-and-hot-reloads-for-development" class="sidebar-link">Compiles and hot-reloads for development</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#compiles-and-minifies-for-production" class="sidebar-link">Compiles and minifies for production</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#lints-and-fixes-files" class="sidebar-link">Lints and fixes files</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#配置vue-config-js" class="sidebar-link">配置vue.config.js</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#环境变量" class="sidebar-link">环境变量</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#配置proxy代理" class="sidebar-link">配置proxy代理</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#修复-hmr-热更新-失效" class="sidebar-link">修复 HMR(热更新)失效</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#添加alias-别名" class="sidebar-link">添加alias(别名)</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#配置-externals-引入-cdn" class="sidebar-link">配置 externals 引入 cdn</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#添加打包分析" class="sidebar-link">添加打包分析</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#添加dll打包" class="sidebar-link">添加DLL打包</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#添加打包压缩功能" class="sidebar-link">添加打包压缩功能</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#去掉-console-log" class="sidebar-link">去掉 console.log</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#为-stylys-提供全局变量" class="sidebar-link">为 stylys 提供全局变量</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#引入-postcss" class="sidebar-link">引入 postcss</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#添加vconsole调试工具" class="sidebar-link">添加vconsole调试工具</a></li><li class="sidebar-sub-header"><a href="/webpack/vue-cli3.html#开启gzip压缩" class="sidebar-link">开启gzip压缩</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="project-setup"><a href="#project-setup" class="header-anchor">#</a> Project setup</h2> <div class="language- extra-class"><pre class="language-text"><code>yarn install
</code></pre></div><h2 id="compiles-and-hot-reloads-for-development"><a href="#compiles-and-hot-reloads-for-development" class="header-anchor">#</a> Compiles and hot-reloads for development</h2> <div class="language- extra-class"><pre class="language-text"><code>yarn serve or yarn dev
</code></pre></div><h2 id="compiles-and-minifies-for-production"><a href="#compiles-and-minifies-for-production" class="header-anchor">#</a> Compiles and minifies for production</h2> <div class="language- extra-class"><pre class="language-text"><code>yarn build
</code></pre></div><h2 id="lints-and-fixes-files"><a href="#lints-and-fixes-files" class="header-anchor">#</a> Lints and fixes files</h2> <div class="language- extra-class"><pre class="language-text"><code>yarn lint
</code></pre></div><hr> <h2 id="配置vue-config-js"><a href="#配置vue-config-js" class="header-anchor">#</a> 配置vue.config.js</h2> <div class="language- extra-class"><pre class="language-text"><code>const IS_PROD = ['production', 'prod'].includes(process.env.NODE_ENV)

module.exports = {
  publicPath: IS_PROD ? process.env.VUE_APP_PUBLIC_PATH : './',
  outputDir: process.env.outputDir || 'dist', // 打包后文件的目录
  assetsDir: &quot;&quot;, // 静态资源目录
  lintOnSave: false,
  runtimeCompiler: false, // 是否使用运行时的Vue版本
  productionSourceMap: !IS_PROD,
  pwa: {},
  css: {},
  configureWebpack: config =&gt; {
    if (IS_PROD) {
      // 生产环境配置
    } else {
      // 开发环境配置
    }
  },
  devServer: {}
}
</code></pre></div><hr> <h2 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h2> <blockquote><p>通过在 package.json 里的 scripts 配置项中添加--mode xxx 来选择不同环境</p></blockquote> <p> 以 VUE_APP 开头的变量会被 webpack.DefinePlugin 静态嵌入到客户端侧的包中，代码中可以通过 process.env.VUE_APP_XXX 访问, NODE_ENV 和 BASE_URL 是两个特殊变量，在代码中始终可用</p> <h4 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h4> <p>  在项目根目录中新建.env, .env.dev, .env.production 等文件</p> <ul><li>.env</li></ul> <p>  serve 默认的本地开发环境配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> <span class="token string">&quot;development&quot;</span>
<span class="token constant">BASE_URL</span> <span class="token operator">=</span> <span class="token string">&quot;./&quot;</span>
<span class="token constant">VUE_APP_PUBLIC_PATH</span> <span class="token operator">=</span> <span class="token string">&quot;./&quot;</span>
<span class="token constant">VUE_APP_API</span> <span class="token operator">=</span> <span class="token string">&quot;https://test.com/api&quot;</span>
</code></pre></div><ul><li>.env.production</li></ul> <p>  build 默认的环境配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> <span class="token string">&quot;production&quot;</span>
<span class="token constant">BASE_URL</span> <span class="token operator">=</span> <span class="token string">&quot;https://prod.com&quot;</span>
<span class="token constant">VUE_APP_PUBLIC_PATH</span> <span class="token operator">=</span> <span class="token string">&quot;https://prod.com&quot;</span>
<span class="token constant">VUE_APP_API</span> <span class="token operator">=</span> <span class="token string">&quot;https://prod.com/api&quot;</span>
</code></pre></div><p>  修改 package.json</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;pro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode production&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="使用环境变量"><a href="#使用环境变量" class="header-anchor">#</a> 使用环境变量</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_API</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;VUE_APP_API: &quot;</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_API</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><hr> <h2 id="配置proxy代理"><a href="#配置proxy代理" class="header-anchor">#</a> 配置proxy代理</h2> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  devServer: {
    port: 8888, // 代理端口
    open: true, // 打开浏览器
    disableHostCheck: true,
    proxy: {
      '/api': {
        target: 'http://172.16.6.41:7000', // 代理目标接口
        changeOrigin: true,
        // ws: true, // 启动websockets
        pathRewrite: {
          '^/api': '/'
        }
      }
    }
  }
}
</code></pre></div><hr> <h2 id="修复-hmr-热更新-失效"><a href="#修复-hmr-热更新-失效" class="header-anchor">#</a> 修复 HMR(热更新)失效</h2> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  chainWebpack: config =&gt; {
    // 修复HMR
    // config.resolve.symlinks(true),
  }
}
</code></pre></div><hr> <h2 id="添加alias-别名"><a href="#添加alias-别名" class="header-anchor">#</a> 添加alias(别名)</h2> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path')
const resolve = dir =&gt; path.join(__dirname, dir)

module.exports = {
  chainWebpack: config =&gt; {
    // 添加别名
    config.resolve.alias
        .set('vue$', 'vue/dist/vue.esm.js')
        .set('@', resolve('src'))
        .set('@assets', resolve('src/assets'))
  }
}
</code></pre></div><hr> <h2 id="配置-externals-引入-cdn"><a href="#配置-externals-引入-cdn" class="header-anchor">#</a> 配置 externals 引入 cdn</h2> <div class="language- extra-class"><pre class="language-text"><code>const BundleAnalyzerPlugin = require(&quot;webpack-bundle-analyzer&quot;).BundleAnalyzerPlugin

module.exports = {
  configureWebpack: config =&gt; {
    config.externals = {
      vue: 'Vue',
      'vue-router': 'VueRouter',
      vuex: 'Vuex',
      axios: 'axios'
    }
  },
  chainWebpack: config =&gt; {
    const cdn = {
      // css: ['https://cdn.bootcss.com/element-ui@2.10.1/lib/theme-chalk/index.css'],
      js: [
        'https://cdn.bootcss.com/vue/2.6.10/vue.min.js',
        'https://cdn.bootcss.com/vue-router/3.1.3/vue-router.min.js',
        'https://cdn.bootcss.com/vuex/3.1.1/vuex.min.js',
        'https://cdn.bootcss.com/axios/0.19.0/axios.min.js'
      ]
    }
    config.plugin('html').tap(args =&gt; {
      // html中添加cdn
      args[0].cdn = cdn
      return args
    })
  }
}
</code></pre></div><p> 在 html 中添加</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- 使用CDN的CSS文件 --&gt;
&lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp;
htmlWebpackPlugin.options.cdn.css) { %&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;&lt;%= htmlWebpackPlugin.options.cdn.css[i] %&gt;&quot; /&gt;
&lt;% } %&gt;

&lt;!-- 使用CDN的JS文件 --&gt;
&lt;% for (var j in htmlWebpackPlugin.options.cdn &amp;&amp;
htmlWebpackPlugin.options.cdn.js) { %&gt;
&lt;script
  type=&quot;text/javascript&quot;
  src=&quot;&lt;%= htmlWebpackPlugin.options.cdn.js[j] %&gt;&quot;
&gt;&lt;/script&gt;
&lt;% } %&gt;
</code></pre></div><hr> <h2 id="添加打包分析"><a href="#添加打包分析" class="header-anchor">#</a> 添加打包分析</h2> <div class="language- extra-class"><pre class="language-text"><code>const BundleAnalyzerPlugin = require(&quot;webpack-bundle-analyzer&quot;).BundleAnalyzerPlugin

module.exports = {
  chainWebpack: config =&gt; {
    if (IS_PROD) {
      // 打包分析
      config.plugin('webpack-report').use(BundleAnalyzerPlugin, [
        {
          analyzerMode: 'static'
        }
      ])
    }
  }
}
</code></pre></div><hr> <h2 id="添加dll打包"><a href="#添加dll打包" class="header-anchor">#</a> 添加DLL打包</h2> <p> 安装 add-asset-html-webpack-plugin clean-webpack-plugin webpack-cli 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add add-asset-html-webpack-plugin clean-webpack-plugin webpack-cli -D
</code></pre></div><p>新建webpack.dll.conf.js</p> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path')
const webpack = require('webpack')
const { CleanWebpackPlugin } = require('clean-webpack-plugin') // 清除之前的dll文件

const dllPath = 'dll' // dll打包后的目录

module.exports = {
  entry: {
    // 提取的文件
    libs: ['vue', 'vue-router', 'vuex', 'axios']
  },
  output: {
    path: path.join(__dirname, dllPath), // 输出路径
    filename: '[name]_[hash:8].dll.js', // 输出文件
    library: '[name]_library' // 暴露出的变量名
  },
  plugins: [
    new CleanWebpackPlugin(),
    new webpack.DllPlugin({
      path: path.resolve(__dirname, dllPath, '[name]-manifest.json'),
      name: '[name]_library', // 要与output.library一致
      context: __dirname
    })
  ]
}

</code></pre></div><p> 在 vue-config.js 中配置</p> <div class="language- extra-class"><pre class="language-text"><code>const fs = require('fs')
var chalk = require('chalk')
const AddAssetHtmlPlugin = require('add-asset-html-webpack-plugin')
var webpack = require('webpack')
const dllPath = 'dll' // 保存目录

try {
  fs.readdirSync(path.resolve(__dirname, './dll'))
} catch (error) {
  // eslint-disable-next-line no-console
  console.log(chalk.yellow('dll folder not found, you must run yarn dll'))
  process.exit(1)
}

module.exports = {
  config.plugins.push(
    new webpack.DllReferencePlugin({
      context: __dirname,
      manifest: path.resolve(__dirname, dllPath, 'libs-manifest.json')
    }),
    new AddAssetHtmlPlugin([
      { filepath: path.resolve(__dirname, dllPath, '*.dll.js') }
    ])
  )
}
</code></pre></div><hr> <h2 id="添加打包压缩功能"><a href="#添加打包压缩功能" class="header-anchor">#</a> 添加打包压缩功能</h2> <p> 安装 filemanager-webpack-plugin 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add filemanager-webpack-plugin -D
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>const AddAssetHtmlPlugin = require('add-asset-html-webpack-plugin')
const outputDir = 'dist'

module.exports = {
  if (argv.indexOf('--zip') !== -1) {
    config.plugins.push(
      new FileManagerPlugin({
        onEnd: [
          {
            delete: [`./${outputDir}.zip`]
          },
          {
            archive: [
              {
                source: `./${outputDir}`,
                destination: `./${outputDir}.zip`,
                format: 'zip'
              }
            ]
          }
        ]
      })
    )
  }
}
</code></pre></div><p> 打包压缩</p> <div class="language- extra-class"><pre class="language-text"><code>yarn build --zip
</code></pre></div><hr> <h2 id="去掉-console-log"><a href="#去掉-console-log" class="header-anchor">#</a> 去掉 console.log</h2> <p> 安装 babel-plugin-transform-remove-console 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add -D babel-plugin-transform-remove-console
</code></pre></div><p> 在 babel-config.js 中配置</p> <div class="language- extra-class"><pre class="language-text"><code>const IS_PROD = ['production', 'prod'].includes(process.env.NODE_ENV)

const plugins = []

if (IS_PROD) {
  plugins.push('transform-remove-console')
}

module.exports = {
  plugins
}
</code></pre></div><hr> <h2 id="为-stylys-提供全局变量"><a href="#为-stylys-提供全局变量" class="header-anchor">#</a> 为 stylys 提供全局变量</h2> <p> 安装 style-resources-loader 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add -D style-resources-loader
</code></pre></div><p> 创建 src/assets/stylus/mixin.styl 文件</p> <p> 在 vue-config.js 中配置</p> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path')
const resolve = dir =&gt; path.join(__dirname, dir)

const addStylusResource = rule =&gt; {
  rule
    .use('style-resouce')
    .loader('style-resources-loader')
    .options({
      patterns: [resolve('src/assets/stylus/mixin.styl')]
    })
}

module.exports = {
  chainWebpack: config =&gt; {
    // 添加 stylus 全局变量
    const types = ['vue-modules', 'vue', 'normal-modules', 'normal']
    types.forEach(type =&gt;
      addStylusResource(config.module.rule('stylus').oneOf(type))
    )
  }
}
</code></pre></div><hr> <h2 id="引入-postcss"><a href="#引入-postcss" class="header-anchor">#</a> 引入 postcss</h2> <p> 安装 postcss-import postcss-px-to-viewport 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add -D postcss-import postcss-px-to-viewport
</code></pre></div><p> 在 vue-config.js 中配置</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  css: {
    // 启用 CSS modules
    // modules: false,
    // css.modules 过时，推荐使用css.requireModuleExtension
    requireModuleExtension: true,
    // 是否使用css分离插件 ExtractTextPlugin
    extract: true,
    // 开启 CSS source maps?
    sourceMap: !IS_PROD,
    // css预设器配置项
    loaderOptions: {
      postcss: {
        plugins: [
          require('postcss-import'),
          require('postcss-px-to-viewport')({
            viewportWidth: 375, // (Number) The width of the viewport.
            viewportHeight: 667, // (Number) The height of the viewport.
            unitPrecision: 3, // (Number) The decimal numbers to allow the REM units to grow to.
            viewportUnit: 'vw', // (String) Expected units.
            selectorBlackList: ['.ignore', '.hairlines', /^.van-.*/], // (Array) The selectors to ignore and leave as px.
            minPixelValue: 1, // (Number) Set the minimum pixel value to replace.
            mediaQuery: false // (Boolean) Allow px to be converted in media queries.
          })
        ]
      }
    }
  }
}
</code></pre></div><hr> <h2 id="添加vconsole调试工具"><a href="#添加vconsole调试工具" class="header-anchor">#</a> 添加vconsole调试工具</h2> <p> 安装 vconsole-webpack-plugin 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add vconsole-webpack-plugin -D
</code></pre></div><p>配置vconsole插件</p> <div class="language- extra-class"><pre class="language-text"><code>const vConsolePlugin = require('vconsole-webpack-plugin')

module.exports = {
  configureWebpack: config =&gt; {
    config.plugins.push(
      // eslint-disable-next-line new-cap
      new vConsolePlugin({
        filter: [], //需要过滤的入口文件
        enable: !IS_PROD //!IS_PROD
      })
    )
  }
}
</code></pre></div><hr> <h2 id="开启gzip压缩"><a href="#开启gzip压缩" class="header-anchor">#</a> 开启gzip压缩</h2> <p> 安装 compression-webpack-plugin 插件</p> <div class="language- extra-class"><pre class="language-text"><code>yarn add compression-webpack-plugin -D
</code></pre></div><p>配置</p> <div class="language- extra-class"><pre class="language-text"><code>const CompressionWebpackPlugin = require('compression-webpack-plugin')

module.exports = {
  configureWebpack: config =&gt; {
    new CompressionWebpackPlugin({
      test: /\.js$|\.html$|\.css/, // 匹配文件名
      threshold: 10240, // 对超过10kb的数据进行压缩
      deleteOriginalAssets: false // 是否删除原文件
    })
  }
}
</code></pre></div><hr></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webpack/webpackdoc.html" class="prev">
        webpack创建工程
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4aad3826.js" defer></script><script src="/assets/js/2.06be43ef.js" defer></script><script src="/assets/js/47.0c50e03c.js" defer></script>
  </body>
</html>
