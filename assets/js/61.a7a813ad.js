(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{420:function(s,a,t){"use strict";t.r(a);var e=t(45),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"project-setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#project-setup"}},[s._v("#")]),s._v(" Project setup")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn install\n")])])]),t("h2",{attrs:{id:"compiles-and-hot-reloads-for-development"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compiles-and-hot-reloads-for-development"}},[s._v("#")]),s._v(" Compiles and hot-reloads for development")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn serve or yarn dev\n")])])]),t("h2",{attrs:{id:"compiles-and-minifies-for-production"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compiles-and-minifies-for-production"}},[s._v("#")]),s._v(" Compiles and minifies for production")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn build\n")])])]),t("h2",{attrs:{id:"lints-and-fixes-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lints-and-fixes-files"}},[s._v("#")]),s._v(" Lints and fixes files")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn lint\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"配置vue-config-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置vue-config-js"}},[s._v("#")]),s._v(" 配置vue.config.js")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const IS_PROD = ['production', 'prod'].includes(process.env.NODE_ENV)\n\nmodule.exports = {\n  publicPath: IS_PROD ? process.env.VUE_APP_PUBLIC_PATH : './',\n  outputDir: process.env.outputDir || 'dist', // 打包后文件的目录\n  assetsDir: \"\", // 静态资源目录\n  lintOnSave: false,\n  runtimeCompiler: false, // 是否使用运行时的Vue版本\n  productionSourceMap: !IS_PROD,\n  pwa: {},\n  css: {},\n  configureWebpack: config => {\n    if (IS_PROD) {\n      // 生产环境配置\n    } else {\n      // 开发环境配置\n    }\n  },\n  devServer: {}\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[s._v("#")]),s._v(" 环境变量")]),s._v(" "),t("blockquote",[t("p",[s._v("通过在 package.json 里的 scripts 配置项中添加--mode xxx 来选择不同环境")])]),s._v(" "),t("p",[s._v(" 以 VUE_APP 开头的变量会被 webpack.DefinePlugin 静态嵌入到客户端侧的包中，代码中可以通过 process.env.VUE_APP_XXX 访问, NODE_ENV 和 BASE_URL 是两个特殊变量，在代码中始终可用")]),s._v(" "),t("h4",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("p",[s._v("  在项目根目录中新建.env, .env.dev, .env.production 等文件")]),s._v(" "),t("ul",[t("li",[s._v(".env")])]),s._v(" "),t("p",[s._v("  serve 默认的本地开发环境配置")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BASE_URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_PUBLIC_PATH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://test.com/api"')]),s._v("\n")])])]),t("ul",[t("li",[s._v(".env.production")])]),s._v(" "),t("p",[s._v("  build 默认的环境配置")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BASE_URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://prod.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_PUBLIC_PATH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://prod.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://prod.com/api"')]),s._v("\n")])])]),t("p",[s._v("  修改 package.json")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pro"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build --mode production"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h4",{attrs:{id:"使用环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用环境变量"}},[s._v("#")]),s._v(" 使用环境变量")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("template"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("template"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mounted")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"VUE_APP_API: "')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_API")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("script"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"配置proxy代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置proxy代理"}},[s._v("#")]),s._v(" 配置proxy代理")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n  devServer: {\n    port: 8888, // 代理端口\n    open: true, // 打开浏览器\n    disableHostCheck: true,\n    proxy: {\n      '/api': {\n        target: 'http://172.16.6.41:7000', // 代理目标接口\n        changeOrigin: true,\n        // ws: true, // 启动websockets\n        pathRewrite: {\n          '^/api': '/'\n        }\n      }\n    }\n  }\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"修复-hmr-热更新-失效"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修复-hmr-热更新-失效"}},[s._v("#")]),s._v(" 修复 HMR(热更新)失效")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n  chainWebpack: config => {\n    // 修复HMR\n    // config.resolve.symlinks(true),\n  }\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"添加alias-别名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加alias-别名"}},[s._v("#")]),s._v(" 添加alias(别名)")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const path = require('path')\nconst resolve = dir => path.join(__dirname, dir)\n\nmodule.exports = {\n  chainWebpack: config => {\n    // 添加别名\n    config.resolve.alias\n        .set('vue$', 'vue/dist/vue.esm.js')\n        .set('@', resolve('src'))\n        .set('@assets', resolve('src/assets'))\n  }\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"配置-externals-引入-cdn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-externals-引入-cdn"}},[s._v("#")]),s._v(" 配置 externals 引入 cdn")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const BundleAnalyzerPlugin = require(\"webpack-bundle-analyzer\").BundleAnalyzerPlugin\n\nmodule.exports = {\n  configureWebpack: config => {\n    config.externals = {\n      vue: 'Vue',\n      'vue-router': 'VueRouter',\n      vuex: 'Vuex',\n      axios: 'axios'\n    }\n  },\n  chainWebpack: config => {\n    const cdn = {\n      // css: ['https://cdn.bootcss.com/element-ui@2.10.1/lib/theme-chalk/index.css'],\n      js: [\n        'https://cdn.bootcss.com/vue/2.6.10/vue.min.js',\n        'https://cdn.bootcss.com/vue-router/3.1.3/vue-router.min.js',\n        'https://cdn.bootcss.com/vuex/3.1.1/vuex.min.js',\n        'https://cdn.bootcss.com/axios/0.19.0/axios.min.js'\n      ]\n    }\n    config.plugin('html').tap(args => {\n      // html中添加cdn\n      args[0].cdn = cdn\n      return args\n    })\n  }\n}\n")])])]),t("p",[s._v(" 在 html 中添加")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('\x3c!-- 使用CDN的CSS文件 --\x3e\n<% for (var i in htmlWebpackPlugin.options.cdn &&\nhtmlWebpackPlugin.options.cdn.css) { %>\n<link rel="stylesheet" href="<%= htmlWebpackPlugin.options.cdn.css[i] %>" />\n<% } %>\n\n\x3c!-- 使用CDN的JS文件 --\x3e\n<% for (var j in htmlWebpackPlugin.options.cdn &&\nhtmlWebpackPlugin.options.cdn.js) { %>\n<script\n  type="text/javascript"\n  src="<%= htmlWebpackPlugin.options.cdn.js[j] %>"\n><\/script>\n<% } %>\n')])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"添加打包分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加打包分析"}},[s._v("#")]),s._v(" 添加打包分析")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const BundleAnalyzerPlugin = require(\"webpack-bundle-analyzer\").BundleAnalyzerPlugin\n\nmodule.exports = {\n  chainWebpack: config => {\n    if (IS_PROD) {\n      // 打包分析\n      config.plugin('webpack-report').use(BundleAnalyzerPlugin, [\n        {\n          analyzerMode: 'static'\n        }\n      ])\n    }\n  }\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"添加dll打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加dll打包"}},[s._v("#")]),s._v(" 添加DLL打包")]),s._v(" "),t("p",[s._v(" 安装 add-asset-html-webpack-plugin clean-webpack-plugin webpack-cli 插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add add-asset-html-webpack-plugin clean-webpack-plugin webpack-cli -D\n")])])]),t("p",[s._v("新建webpack.dll.conf.js")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const path = require('path')\nconst webpack = require('webpack')\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin') // 清除之前的dll文件\n\nconst dllPath = 'dll' // dll打包后的目录\n\nmodule.exports = {\n  entry: {\n    // 提取的文件\n    libs: ['vue', 'vue-router', 'vuex', 'axios']\n  },\n  output: {\n    path: path.join(__dirname, dllPath), // 输出路径\n    filename: '[name]_[hash:8].dll.js', // 输出文件\n    library: '[name]_library' // 暴露出的变量名\n  },\n  plugins: [\n    new CleanWebpackPlugin(),\n    new webpack.DllPlugin({\n      path: path.resolve(__dirname, dllPath, '[name]-manifest.json'),\n      name: '[name]_library', // 要与output.library一致\n      context: __dirname\n    })\n  ]\n}\n\n")])])]),t("p",[s._v(" 在 vue-config.js 中配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const fs = require('fs')\nvar chalk = require('chalk')\nconst AddAssetHtmlPlugin = require('add-asset-html-webpack-plugin')\nvar webpack = require('webpack')\nconst dllPath = 'dll' // 保存目录\n\ntry {\n  fs.readdirSync(path.resolve(__dirname, './dll'))\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.log(chalk.yellow('dll folder not found, you must run yarn dll'))\n  process.exit(1)\n}\n\nmodule.exports = {\n  config.plugins.push(\n    new webpack.DllReferencePlugin({\n      context: __dirname,\n      manifest: path.resolve(__dirname, dllPath, 'libs-manifest.json')\n    }),\n    new AddAssetHtmlPlugin([\n      { filepath: path.resolve(__dirname, dllPath, '*.dll.js') }\n    ])\n  )\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"添加打包压缩功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加打包压缩功能"}},[s._v("#")]),s._v(" 添加打包压缩功能")]),s._v(" "),t("p",[s._v(" 安装 filemanager-webpack-plugin 插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add filemanager-webpack-plugin -D\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const AddAssetHtmlPlugin = require('add-asset-html-webpack-plugin')\nconst outputDir = 'dist'\n\nmodule.exports = {\n  if (argv.indexOf('--zip') !== -1) {\n    config.plugins.push(\n      new FileManagerPlugin({\n        onEnd: [\n          {\n            delete: [`./${outputDir}.zip`]\n          },\n          {\n            archive: [\n              {\n                source: `./${outputDir}`,\n                destination: `./${outputDir}.zip`,\n                format: 'zip'\n              }\n            ]\n          }\n        ]\n      })\n    )\n  }\n}\n")])])]),t("p",[s._v(" 打包压缩")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn build --zip\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"去掉-console-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#去掉-console-log"}},[s._v("#")]),s._v(" 去掉 console.log")]),s._v(" "),t("p",[s._v(" 安装 babel-plugin-transform-remove-console 插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add -D babel-plugin-transform-remove-console\n")])])]),t("p",[s._v(" 在 babel-config.js 中配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const IS_PROD = ['production', 'prod'].includes(process.env.NODE_ENV)\n\nconst plugins = []\n\nif (IS_PROD) {\n  plugins.push('transform-remove-console')\n}\n\nmodule.exports = {\n  plugins\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"为-stylys-提供全局变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为-stylys-提供全局变量"}},[s._v("#")]),s._v(" 为 stylys 提供全局变量")]),s._v(" "),t("p",[s._v(" 安装 style-resources-loader 插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add -D style-resources-loader\n")])])]),t("p",[s._v(" 创建 src/assets/stylus/mixin.styl 文件")]),s._v(" "),t("p",[s._v(" 在 vue-config.js 中配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const path = require('path')\nconst resolve = dir => path.join(__dirname, dir)\n\nconst addStylusResource = rule => {\n  rule\n    .use('style-resouce')\n    .loader('style-resources-loader')\n    .options({\n      patterns: [resolve('src/assets/stylus/mixin.styl')]\n    })\n}\n\nmodule.exports = {\n  chainWebpack: config => {\n    // 添加 stylus 全局变量\n    const types = ['vue-modules', 'vue', 'normal-modules', 'normal']\n    types.forEach(type =>\n      addStylusResource(config.module.rule('stylus').oneOf(type))\n    )\n  }\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"引入-postcss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#引入-postcss"}},[s._v("#")]),s._v(" 引入 postcss")]),s._v(" "),t("p",[s._v(" 安装 postcss-import postcss-px-to-viewport 插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add -D postcss-import postcss-px-to-viewport\n")])])]),t("p",[s._v(" 在 vue-config.js 中配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n  css: {\n    // 启用 CSS modules\n    // modules: false,\n    // css.modules 过时，推荐使用css.requireModuleExtension\n    requireModuleExtension: true,\n    // 是否使用css分离插件 ExtractTextPlugin\n    extract: true,\n    // 开启 CSS source maps?\n    sourceMap: !IS_PROD,\n    // css预设器配置项\n    loaderOptions: {\n      postcss: {\n        plugins: [\n          require('postcss-import'),\n          require('postcss-px-to-viewport')({\n            viewportWidth: 375, // (Number) The width of the viewport.\n            viewportHeight: 667, // (Number) The height of the viewport.\n            unitPrecision: 3, // (Number) The decimal numbers to allow the REM units to grow to.\n            viewportUnit: 'vw', // (String) Expected units.\n            selectorBlackList: ['.ignore', '.hairlines', /^.van-.*/], // (Array) The selectors to ignore and leave as px.\n            minPixelValue: 1, // (Number) Set the minimum pixel value to replace.\n            mediaQuery: false // (Boolean) Allow px to be converted in media queries.\n          })\n        ]\n      }\n    }\n  }\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"添加vconsole调试工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加vconsole调试工具"}},[s._v("#")]),s._v(" 添加vconsole调试工具")]),s._v(" "),t("p",[s._v(" 安装 vconsole-webpack-plugin 插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add vconsole-webpack-plugin -D\n")])])]),t("p",[s._v("配置vconsole插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const vConsolePlugin = require('vconsole-webpack-plugin')\n\nmodule.exports = {\n  configureWebpack: config => {\n    config.plugins.push(\n      // eslint-disable-next-line new-cap\n      new vConsolePlugin({\n        filter: [], //需要过滤的入口文件\n        enable: !IS_PROD //!IS_PROD\n      })\n    )\n  }\n}\n")])])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"开启gzip压缩"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启gzip压缩"}},[s._v("#")]),s._v(" 开启gzip压缩")]),s._v(" "),t("p",[s._v(" 安装 compression-webpack-plugin 插件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add compression-webpack-plugin -D\n")])])]),t("p",[s._v("配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const CompressionWebpackPlugin = require('compression-webpack-plugin')\n\nmodule.exports = {\n  configureWebpack: config => {\n    new CompressionWebpackPlugin({\n      test: /\\.js$|\\.html$|\\.css/, // 匹配文件名\n      threshold: 10240, // 对超过10kb的数据进行压缩\n      deleteOriginalAssets: false // 是否删除原文件\n    })\n  }\n}\n")])])]),t("hr")])}),[],!1,null,null,null);a.default=n.exports}}]);